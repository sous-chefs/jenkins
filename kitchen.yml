driver:
  name: vagrant
  customize:
    cpus: 2
    memory: 1024
  network:
    # Allow access to the Jenkins webui which is useful when troubleshooting
    - - forwarded_port
      - guest: 8080
        host: 9090
        auto_correct: true

provisioner:
  name: chef_infra
  data_path: test/fixtures/keys
  data_bags_path: test/fixtures/data_bags
  deprecations_as_errors: true
  attributes:
    jenkins:
      master:
        host: localhost
        # This it to help issues we run into on the CI systems
        update_center_sleep: 10

platforms:
  - name: almalinux-8
  - name: almalinux-9
  - name: amazonlinux-2023
  - name: centos-stream-9
  - name: debian-12
  - name: debian-13
  - name: rockylinux-8
  - name: rockylinux-9
  - name: ubuntu-20.04
  - name: ubuntu-22.04
  - name: ubuntu-24.04
  - name: windows-2016
    driver:
      box: tas50/windows_2016
  - name: windows-2019
    driver:
      box: tas50/windows_2019

verifier:
  name: inspec

suites:
  - name: default
    run_list:
      - test::default
    excludes:
      - windows-2016
      - windows-2019

  - name: plugins
    run_list:
      - test::plugins
    excludes:
      - windows-2016
      - windows-2019

  - name: authentication
    run_list:
      - test::authentication
    excludes:
      - windows-2016
      - windows-2019
